{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/app.js","src/baseanimal.js","src/chatHandler.js","src/chicken.js","src/cow.js","src/loadmodels.js","src/playground.js","src/world.js"],"names":[],"mappings":"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","file":"compiled.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\nimport Playground from \"./playground.js\"\r\nlet modal = document.querySelectorAll(\".modal-container\")[0];\r\nlet form = document.getElementById(\"AnimalForm\");\r\n\r\nform.addEventListener(\"submit\", (event) => {\r\n\tevent.preventDefault();\r\n\tlet animal = document.querySelector(\"input[name='animal']:checked\").value;\r\n\tlet name = document.getElementById(\"name\").value;\r\n\tif(name !== \"\"){\r\n\t\tmodal.style.display = \"none\";\r\n\t\tnew Playground(name, animal);\r\n\t} else{\r\n\t\talert(\"Enter name plz!\");\r\n\t}\r\n});\r\n","export default class BaseAnimal{\r\n  constructor(id, startposition, name, scale, reference, scene){\r\n\t\tthis.id = id;\r\n\t\tthis.scale = scale;\r\n\t\tthis.position = startposition;\r\n\t\tthis.target = new THREE.Vector3(0, 0, 0);\r\n\t\tthis.group = new THREE.Group();\r\n\t\tthis.scene = scene;\r\n\t\tthis.speed = 12;\r\n\t\tthis.rotation = 0;\r\n\t\tthis.moving = false;\r\n\t\tthis.rotating = false;\r\n\t\tthis.body = reference.clone();\r\n\t\tthis.bones = this.getBones();\r\n\t\tthis.name = name;\r\n    this.animaltype = \"\";\r\n\t\tthis.options = {\r\n\t\t\tsize: 1.4,\r\n\t\t\theight: 10,\r\n\t\t\tcurveSegments: 2,\r\n\t\t\tfont: \"helvetiker\",\r\n\t\t\tbevelEnabled: false\r\n\t\t};\r\n\t\tvar textShapes = THREE.FontUtils.generateShapes( this.name, this.options );\r\n\t\tvar text = new THREE.ShapeGeometry( textShapes );\r\n\t\tthis.textMesh = new THREE.Mesh( text, new THREE.MeshBasicMaterial( { color: \"#000000\", side: THREE.DoubleSide } ) );\r\n\t\tthis.textMesh.position.z = -5;\r\n\t\tthis.textMesh.position.y = 3;\r\n\t\tthis.body.add( this.textMesh );\r\n\t\tthis.loadModel();\r\n\t}\r\n\r\n\tgetBones(){\r\n\t\tthrow new Error(\"Must be implemented by an animal.\")\r\n\t}\r\n\r\n\tmoveTowardsTarget(vec){\r\n\t\tthis.target = vec;\r\n\t\tthis.moving = true;\r\n\t}\r\n\r\n\tupdateMovement(mesh){\r\n\t\tthis.body.lookAt( this.target );\r\n\t\tthis.body.translateZ(0.5);\r\n\t\tlet pos = new THREE.Vector3(this.body.position.x * 1.05 * this.scale, this.body.position.y * 1.05 * this.scale, this.body.position.z * 1.05 * this.scale);\r\n\t\tlet center = new THREE.Vector3( 0, 0, 0).sub(pos).normalize();\r\n\t\tlet raycaster = new THREE.Raycaster(pos, center);\r\n\t\tlet intersects = raycaster.intersectObject( mesh );\r\n\r\n\t\tif(intersects.length){\r\n\t\t\tlet point = intersects[0].point;\r\n\t\t\tlet newpoint = new THREE.Vector3(point.x / this.scale, point.y / this.scale, point.z / this.scale);\r\n\t\t\tthis.body.position.copy(newpoint);\r\n\t\t\tlet groundpoint = intersects[0].face.normal;\r\n\t\t\tlet v1 = this.target.clone().sub(this.body.position).normalize();\r\n\t\t\tlet v2 = groundpoint.clone().sub(this.body.position).normalize();\r\n\t\t\tlet v3 = new THREE.Vector3().crossVectors(v1, v2).normalize();\r\n\t\t\tthis.body.up.copy(v3);\r\n\t\t\tthis.body.lookAt(groundpoint);\r\n\t\t}\r\n\r\n\t\tlet distance = this.body.position.distanceTo( this.target );\r\n\t\tif(distance < 1){\r\n\t\t\tthis.moving = false;\r\n\t\t}\r\n\r\n\t\tthis.updateAnimation();\r\n\t}\r\n\r\n\tupdateAnimation(){\r\n    throw new Error(\"Must be implemented by an animal.\")\r\n\t}\r\n\r\n\tremove(){\r\n\t\tthis.scene.remove(this.group);\r\n\t}\r\n\r\n\tloadModel(){\r\n\t\tthis.group.add(this.body);\r\n\t\tthis.group.scale.set( this.scale, this.scale, this.scale );\r\n\t\tthis.body.position.copy(this.position);\r\n\t\tthis.scene.add(this.group);\r\n\t}\r\n}\r\n","\r\nexport default class ChatHandler {\r\n\tconstructor(){\r\n\t\tlet self = this;\r\n\t\tlet awayclass = \"away\";\r\n\r\n\t\tthis.infobox = document.querySelectorAll(\".info\")[0];\r\n\t\tthis.messagebox = document.querySelectorAll(\".message-box\")[0];\r\n\t\tthis.toggler = document.querySelectorAll(\".toggle-away\")[0];\r\n\r\n\t\tthis.toggler.addEventListener(\"click\", () => {\r\n\t\t\tself.infobox.classList.toggle(awayclass);\r\n\t\t }, false);\r\n\t}\r\n\r\n\tappendMessage(name, value){\r\n\t\tvar div = document.createElement('div');\r\n    div.className = 'message';\r\n    div.innerHTML = `<span class=\"name\">${name}</span>: <span class=\"value\">${value}</span>`;\r\n   \tthis.messagebox.appendChild(div);\r\n\t \tthis.messagebox.scrollTop = this.messagebox.scrollHeight;\r\n\t}\r\n}\r\n","import BaseAnimal from \"./baseanimal.js\";\r\nexport default class Chicken extends BaseAnimal {\r\n  constructor(id, startposition, name, scale, reference, scene){\r\n    super(id, startposition, name, scale, reference, scene);\r\n    this.animaltype = \"chicken\";\r\n  }\r\n\r\n  getBones(){\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: \"leftleg\",\r\n\t\t\t\tleg: this.body.skeleton.bones[3],\r\n\t\t\t\tgoingforward: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"rightleg\",\r\n\t\t\t\tleg: this.body.skeleton.bones[5],\r\n\t\t\t\tgoingforward: false\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\r\n  updateAnimation(){\r\n\t\tthis.bones.forEach((bone) => {\r\n\t\t\tif(bone.goingforward){\r\n\t\t\t\tbone.leg.rotation.y -= 0.02\r\n\t\t\t} else{\r\n\t\t\t\tbone.leg.rotation.y += 0.02\r\n\t\t\t}\r\n\r\n\t\t\tif(bone.leg.rotation.y > 0.3 || bone.leg.rotation.y < -0.3){\r\n\t\t\t\tbone.goingforward = !bone.goingforward;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","import BaseAnimal from \"./baseanimal.js\";\r\nexport default class Cow extends BaseAnimal {\r\n\tconstructor(id, startposition, name, scale, reference, scene){\r\n\t\tsuper(id, startposition, name, scale, reference, scene);\r\n\t\tthis.animaltype = \"cow\";\r\n\t}\r\n\r\n\tgetBones(){\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: \"rightbehindleg\",\r\n\t\t\t\tleg: this.body.skeleton.bones[2],\r\n\t\t\t\tgoingforward: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"leftbehindleg\",\r\n\t\t\t\tleg: this.body.skeleton.bones[4],\r\n\t\t\t\tgoingforward: false\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"rightfrontleg\",\r\n\t\t\t\tleg: this.body.skeleton.bones[7],\r\n\t\t\t\tgoingforward: false\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"leftfrontleg\",\r\n\t\t\t\tleg: this.body.skeleton.bones[9],\r\n\t\t\t\tgoingforward: true\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\r\n\tupdateAnimation(){\r\n\t\tthis.bones.forEach((bone) => {\r\n\t\t\tif(bone.goingforward){\r\n\t\t\t\tbone.leg.rotation.y -= 0.02\r\n\t\t\t} else{\r\n\t\t\t\tbone.leg.rotation.y += 0.02\r\n\t\t\t}\r\n\r\n\t\t\tif(bone.leg.rotation.y > 0.3 || bone.leg.rotation.y < -0.3){\r\n\t\t\t\tbone.goingforward = !bone.goingforward;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n","export default class LoadModels{\r\n\tconstructor(){\r\n\t\tthis.chicken = null;\r\n\t\tthis.cow = null;\r\n\t\tthis.world = null;\r\n\t}\r\n\tload(){\r\n\t\tlet self = this;\r\n\t\treturn new Promise((fulfill, reject) => {\r\n\t\t\tself.loadWorld(self)\r\n\t\t\t\t.then((mesh) => {\r\n\t\t\t\t\tthis.world = mesh;\r\n\t\t\t\t\treturn self.loadSkeletalModel(\"./reference/chicken1.json\");\r\n\t\t\t\t})\r\n\t\t\t\t.then((mesh) => {\r\n\t\t\t\t\tself.chicken = mesh;\r\n\t\t\t\t\treturn self.loadSkeletalModel(\"./reference/cow.json\");\r\n\t\t\t\t})\r\n\t\t\t\t.then((mesh) => {\r\n\t\t\t\t\tself.cow = mesh;\r\n\t\t\t\t\tfulfill();\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tloadWorld(ctx){\r\n\t\treturn new Promise((fulfill, reject) =>{\r\n\t\t\tlet loader = new THREE.JSONLoader();\r\n\t\t\tloader.load('./reference/World.json', ( geometry, materials ) => {\r\n\t\t\t\tvar mesh = new THREE.Mesh(\r\n\t\t\t\t\tgeometry,\r\n\t\t\t\t\tnew THREE.MeshFaceMaterial(materials)\r\n\t\t\t\t);\r\n\t\t\t\tmesh.receiveShadow = true;\r\n\t\t\t\tmesh.castShadow = true;\r\n\t\t\t\tfulfill(mesh);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tloadSkeletalModel(path){\r\n\t\treturn new Promise( (fulfill, reject) => {\r\n\t\t\tlet loader = new THREE.JSONLoader();\r\n\t\t\tloader.load(path, ( geometry, materials ) => {\r\n\t\t\t\tfor ( var i = 0; i < materials.length; i ++ ) {\r\n\t\t\t\t\tvar m = materials[ i ];\r\n\t\t\t\t\tm.skinning = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mesh = new THREE.SkinnedMesh( geometry, new THREE.MeshFaceMaterial( materials ) );\r\n\t\t\t\tmesh.geometry.dynamic = true;\r\n\t\t\t\tmesh.castShadow = true;\r\n\t\t\t\tmesh.receiveShadow = true;\r\n\t\t\t\tfulfill(mesh);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n","import Cow from \"./cow.js\";\r\nimport Chicken from \"./chicken.js\";\r\nimport World from \"./world.js\";\r\nimport LoadModels from \"./loadmodels.js\";\r\nimport ChatHandler from \"./chatHandler.js\";\r\n\r\nexport default class Playground{\r\n\tconstructor(name, animal){\r\n\t\tlet self = this;\r\n\r\n\t\tthis.socket = null;\r\n\t\tthis.isdragging = false;\r\n\t\tthis.world;\r\n\t\tthis.animal = null;\r\n\t\tthis.animals = [];\r\n\t\tthis.clock = new THREE.Clock();\r\n\t\tthis.scene = new THREE.Scene();\r\n\t\tthis.camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 10000);\r\n\r\n\t\tthis.hemilight;\r\n\t\tthis.dirlight;\r\n\r\n\t\tthis.raycaster = new THREE.Raycaster();\r\n\t\tthis.renderer = new THREE.WebGLRenderer( { antialias: true } );\r\n\r\n\t\tthis.camera.position.set(75, 0, -40);\r\n\t\tthis.camera.target = new THREE.Vector3(0, 0, 0);\r\n\t\tthis.camera.up.set(1, 0, -1);\r\n\t\tthis.camera.lookAt( this.camera.target );\r\n\r\n\t\tthis.setlighting();\r\n\t\tthis.setskydome();\r\n\t\tthis.setrenderer();\r\n\r\n\t\tthis.controls = new THREE.TrackballControls(this.camera, this.renderer.domElement);\r\n\t\tthis.controls.target.copy(this.camera.target);\r\n\t\tthis.controls.noPan = true;\r\n\t\tthis.controls.rotateSpeed = 8.0;\r\n\t\tthis.controls.minDistance = 20;\r\n\t\tthis.controls.maxDistance = 400;\r\n\r\n\t\tthis.textbox = document.querySelectorAll(\".chat\")[0];\r\n\t\tthis.textboxIsActive = false;\r\n\t\tthis.chat = new ChatHandler();\r\n\r\n\t\tthis.clientClickX = 0;\r\n    \tthis.clientClickY = 0;\r\n\r\n\t\tthis.textbox.addEventListener(\"focus\", () => {\r\n\t\t\tself.textboxIsActive = true;\r\n\t\t}, true);\r\n\r\n\t\tthis.textbox.addEventListener(\"blur\", () => {\r\n\t\t\tself.textboxIsActive = false;\r\n\t\t}, true);\r\n\r\n\t\tthis.renderer.domElement.addEventListener(\"touchend\", (event) => {\r\n\t\t\tself.onMouseUp(self.translateTouchEvent(event))\r\n\t\t}, false);\r\n\r\n\t\tthis.renderer.domElement.addEventListener(\"touchstart\", (event) => {\r\n\t\t\tself.onMouseDown(self.translateTouchEvent(event));\r\n\t\t}, false);\r\n\r\n\t\tthis.renderer.domElement.addEventListener(\"mouseup\", (event) => {\r\n\t\t\tself.onMouseUp(event)\r\n\t\t}, false);\r\n\r\n\t\tthis.renderer.domElement.addEventListener(\"mousedown\", (event) => {\r\n\t\t\tself.onMouseDown(event)\r\n\t\t}, false);\r\n\r\n\t\twindow.addEventListener(\"resize\", () => { self.onWindowResize() }, false );\r\n\t\twindow.addEventListener(\"keydown\", (event) => { self.onKeyDown(event) }, false);\r\n\r\n\t\tthis.reference = new LoadModels();\r\n\t\tthis.reference.load().then(() => {\r\n\t\t\tself.socket = io.connect(\"http://localhost:9200/\");\r\n\t\t\tself.initialize(name, animal);\r\n\t\t});\r\n\t}\r\n\r\n\tinitialize(name, animal){\r\n\t\tlet self = this;\r\n\r\n\t\tthis.world = new World(this.reference, 500);\r\n\t\tthis.world.loadToScene(this.scene);\r\n\r\n\t\tthis.socket.on(\"giveid\", (id) => {\r\n\t\t\tconst x = 37.049533439151695,\r\n\t\t\t\t\t\ty = 504.9169002010969,\r\n\t\t\t\t\t\tz = 152.38907703563717;\r\n\t\t\tself.animal = self.getAnimal(id, name, animal, new THREE.Vector3(x, y, z));\r\n\r\n\t\t\tself.draw();\r\n\t\t\tself.animal.updateMovement(self.world.mesh);\r\n\r\n\t\t\tself.socket.emit(\"new animal\", {\r\n\t\t\t\tx: self.animal.body.position.x,\r\n\t\t\t\ty: self.animal.body.position.y,\r\n\t\t\t\tz: self.animal.body.position.z,\r\n\t\t\t\tname: self.animal.name,\r\n\t\t\t\tanimaltype: self.animal.animaltype\r\n\t\t\t});\r\n\t\t\tself.animal.body.add(self.camera);\r\n\t\t});\r\n\t\tself.socket.on(\"allplayers\", (data) => {\r\n\t\t\tdata.forEach((animal) => {\r\n\t\t\t\tlet c = self.getAnimal(animal.id, animal.name, animal.animaltype, new THREE.Vector3(animal.x, animal.y, animal.z));\r\n\t\t\t\tc.updateMovement(self.world.mesh);\r\n\t\t\t\tself.animals.push(c);\r\n\t\t\t});\r\n\t\t\tdocument.querySelector(\"#animalcount\").textContent = self.animals.length + 1;\r\n\t\t});\r\n\r\n\t\tself.socket.on(\"newplayer\", (animal) => {\r\n\t\t\tlet ani = self.getAnimal(animal.id, animal.name, animal.animaltype, new THREE.Vector3(animal.x, animal.y, animal.z));\r\n\t\t\tani.updateMovement(self.world.mesh);\r\n\t\t\tself.animals.push(ani);\r\n\t\t\tdocument.querySelector(\"#animalcount\").textContent = self.animals.length + 1;\r\n\r\n\t\t});\r\n\r\n\t\tself.socket.on(\"removeplayer\", (data) => {\r\n\t\t\tfor(var i = 0; i < self.animals.length; i++) {\r\n\t\t\t    if(self.animals[i].id == data.id) {\r\n\t\t\t\t\tself.animals[i].remove();\r\n\t\t\t        self.animals.splice(i, 1);\r\n\t\t\t        break;\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t\tdocument.querySelector(\"#animalcount\").textContent = self.animals.length + 1;\r\n\t\t});\r\n\r\n\t\tself.socket.on(\"message\", (animal) => {\r\n\t\t\tself.chat.appendMessage(animal.name, animal.message);\r\n\t\t});\r\n\r\n\t\tself.socket.on(\"move\", (animal) => {\r\n\t\t\tlet movinganimal = self.animals.find((a) => { return a.id === animal.id });\r\n\t\t\tlet newpoint = new THREE.Vector3(animal.x, animal.y, animal.z);\r\n\t\t\tmovinganimal.moveTowardsTarget(newpoint);\r\n\t\t});\r\n\r\n\t}\r\n\tonMouseDown(event){\r\n\t\tthis.clientClickX = event.clientX;\r\n    \tthis.clientClickY = event.clientY;\r\n\t}\r\n\r\n\tonMouseUp(event){\r\n\t\tlet self = this;\r\n\t\tif (event.target !== self.renderer.domElement) { return; }\r\n\t \tlet x = event.clientX;\r\n        let y = event.clientY;\r\n        if( x != self.clientClickX || y != self.clientClickY ){return; }\r\n\r\n\t\tvar mouse = {\r\n\t\t\tx: ( x / window.innerWidth ) * 2 - 1,\r\n\t\t\ty: - ( y / window.innerHeight ) * 2 + 1\r\n\t\t}\r\n\t\tthis.raycaster.setFromCamera( mouse, this.camera );\r\n\r\n\t\tvar intersects = this.raycaster.intersectObject( this.world.mesh );\r\n\r\n\t\tif(intersects.length){\r\n\t\t\tvar point = intersects[ 0 ].point;\r\n\t\t\tvar newpoint = new THREE.Vector3(point.x / self.animal.scale, point.y / self.animal.scale, point.z / self.animal.scale);\r\n\t\t\tself.animal.moveTowardsTarget(newpoint);\r\n\r\n\t\t\tself.socket.emit(\"move animal\", {\r\n\t\t\t\tx: newpoint.x,\r\n\t\t\t\ty: newpoint.y,\r\n\t\t\t\tz: newpoint.z\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetAnimal(id, name, animal, pos){\r\n\t\tif(animal === \"cow\"){\r\n\t\t\treturn new Cow(id, pos, name, 4, this.reference.cow, this.scene);\r\n\t\t} else{\r\n\t\t\treturn new Chicken(id, pos, name, 4, this.reference.chicken, this.scene);\r\n\t\t}\r\n\t}\r\n\r\n\tonKeyDown(event){\r\n\t\tlet self = this;\r\n  \t\tlet keyCode = event.keyCode;\r\n\t  \tif(this.textboxIsActive && keyCode === 13 && self.textbox.value !== \"\"){\r\n\t\t  \tself.socket.emit(\"new message\", {\r\n\t\t\t\t\tmessage: self.textbox.value\r\n\t\t  \t});\r\n\t\t  \tself.chat.appendMessage(self.animal.name, self.textbox.value);\r\n\t   \t\tself.textbox.value = \"\";\r\n\t  \t}\r\n\t}\r\n\r\n\tonWindowResize(){\r\n\t\tthis.camera.aspect = window.innerWidth / window.innerHeight;\r\n\t\tthis.camera.updateProjectionMatrix();\r\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\r\n\t}\r\n\r\n\ttranslateTouchEvent(e) {\r\n\t    e.stopPropagation();\r\n\t    e.preventDefault();\r\n\t\tif(e.touches.length){\r\n\t\t\treturn {\r\n\t\t\t\tclientX: e.touches[0].clientX,\r\n\t\t\t\tclientY: e.touches[0].clientY,\r\n\t\t\t\tpreventDefault: e.preventDefault,\r\n\t\t\t\ttarget: this.renderer.domElement\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn{\r\n\t\t\t\tclientX: e.changedTouches[0].clientX,\r\n\t\t\t\tclientY: e.changedTouches[0].clientY,\r\n\t\t\t\tpreventDefault: e.preventDefault,\r\n\t\t\t\ttarget: this.renderer.domElement\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetskydome(){\r\n\t\tthis.scene.fog = new THREE.Fog( 0xffffff, 1, 5000 );\r\n\t\tthis.scene.fog.color.setHSL( 0.6, 0, 1 );\r\n\r\n\t\tvar vertexShader = document.getElementById( 'vertexShader' ).textContent;\r\n\t\tvar fragmentShader = document.getElementById( 'fragmentShader' ).textContent;\r\n\t\tvar uniforms = {\r\n\t\t\ttopColor: \t { type: \"c\", value: new THREE.Color( 0x264348 ) },\r\n\t\t\tbottomColor: { type: \"c\", value: new THREE.Color( 0x044F67 ) },\r\n\t\t\toffset:\t\t { type: \"f\", value: 33 },\r\n\t\t\texponent:\t { type: \"f\", value: 0.6 }\r\n\t\t};\r\n\t\t//uniforms.topColor.value.copy( this.hemilight.color );\r\n\r\n\t\tthis.scene.fog.color.copy( uniforms.bottomColor.value );\r\n\r\n\t\tvar skyGeo = new THREE.SphereGeometry( 4000, 32, 15 );\r\n\t\tvar skyMat = new THREE.ShaderMaterial( { vertexShader: vertexShader, fragmentShader: fragmentShader, uniforms: uniforms, side: THREE.BackSide } );\r\n\r\n\t\tvar sky = new THREE.Mesh( skyGeo, skyMat );\r\n\t\tthis.scene.add( sky );\r\n\t}\r\n\r\n\tsetlighting(){\r\n\t\tthis.hemilight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );\r\n\t\tthis.hemilight.color.setHSL( 0.6, 1, 0.6 );\r\n\t\tthis.hemilight.groundColor.setHSL( 0.095, 1, 0.75 );\r\n\t\tthis.hemilight.position.set( 0, 500, 0 );\r\n\t\tthis.scene.add( this.hemilight );\r\n\r\n\t\tthis.dirlight = new THREE.DirectionalLight( 0xffffff, 1 );\r\n\t\tthis.dirlight.color.setHSL( 0.1, 1, 0.95 );\r\n\t\tthis.dirlight.position.set( -1, 1.75, 1 );\r\n\t\tthis.dirlight.position.multiplyScalar( 50 );\r\n\t\tthis.scene.add( this.dirlight );\r\n\r\n\t\tthis.dirlight.castShadow = true;\r\n\r\n\t\tthis.dirlight.shadowMapWidth = 2048;\r\n\t\tthis.dirlight.shadowMapHeight = 2048;\r\n\r\n\t\tvar d = 50;\r\n\r\n\t\tthis.dirlight.shadowCameraLeft = -d;\r\n\t\tthis.dirlight.shadowCameraRight = d;\r\n\t\tthis.dirlight.shadowCameraTop = d;\r\n\t\tthis.dirlight.shadowCameraBottom = -d;\r\n\r\n\t\tthis.dirlight.shadowCameraFar = 3500;\r\n\t\tthis.dirlight.shadowBias = -0.0001;\r\n\t}\r\n\r\n\tsetrenderer(){\r\n\t\tthis.renderer.setClearColor( \"#CCCCCC\" );\r\n\t\tthis.renderer.sortObjects = false;\r\n\t\tthis.renderer.autoClear = false;\r\n\t\tthis.renderer.gammaInput = true;\r\n\t\tthis.renderer.gammaOutput = true;\r\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\r\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\r\n\t\tthis.renderer.shadowMapEnabled = true;\r\n\t\tthis.renderer.shadowMapType = THREE.PCFSoftShadowMap;\r\n\t\tlet container = document.createElement( 'div' );\r\n\t\tdocument.body.appendChild(container);\r\n\t\tcontainer.appendChild( this.renderer.domElement );\r\n\t}\r\n\r\n\tdraw(){\r\n\t\tlet self = this;\r\n\t\twindow.requestAnimationFrame(() => {self.draw();});\r\n\t\tthis.renderer.clear();\r\n\t\tthis.renderer.setViewport( 0, 0, window.innerWidth, window.innerHeight );\r\n\t\tthis.renderer.render(this.scene, this.camera);\r\n\t\tthis.controls.update();\r\n\r\n\t\tself.handleMovement(self.animal);\r\n\r\n\t\tself.animals.forEach((animal) => {\r\n\t\t\tself.handleMovement(animal);\r\n\t\t});\r\n\t}\r\n\r\n\thandleMovement(animal){\r\n\t\tif(animal.moving){\r\n\t\t\tanimal.updateMovement(this.world.mesh, this.scene);\r\n\t\t}\r\n\t\tanimal.textMesh.lookAt(this.camera.position);\r\n\t\tanimal.textMesh.up.copy(this.camera.up);\r\n\t}\r\n}\r\n","export default class World{\r\n\tconstructor(reference, scale){\r\n\t\tthis.scale = scale;\r\n\t\tthis.mesh = reference.world.clone();\r\n\t}\r\n\r\n\tloadToScene(scene){\r\n\t\tthis.mesh.scale.set( this.scale, this.scale, this.scale );\r\n\t\tscene.add(this.mesh);\r\n\t}\r\n}\r\n"]}